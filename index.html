<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        //function greet
        function greet(name){

            //if string is empty or null
            if(name == null || name==""){
                alert("Hello, my friends!");
                return;
            }

            //split the string if delimeter are , or space
            const nameArray = name.split(/(?:,| )+/);
            //create a array of normal names
            const normalName = [];
            //create a array of shouted names
            const shoutedName = [];
            let greetMessage = "";
console.log(nameArray);
            //seperate the nameArray into two arrays:- shoutedName array and normalName array
            for(let i=0;i<nameArray.length;i++){
                if(nameArray[i] == '') continue;
                if(nameArray[i] == nameArray[i].toUpperCase()){
                    shoutedName.push(nameArray[i]);
                    continue;
                }
                normalName.push(nameArray[i]);
            }

            //Handling normal names cases 
            let checkNormalNames = true;
            for(let i=0;i<normalName.length;i++){
                //if normal names exist start the string with hello
                if(checkNormalNames){
                    greetMessage += "Hello";
                    checkNormalNames = false;
                }

                //if there is only one normal name
                if(normalName.length == 1){
                    greetMessage += ` ${normalName[i]}.`;
                    break;
                }

                //if this is last normal name and there are only 2 normal names
                if(i == normalName.length-1  && normalName.length == 2){
                    greetMessage += ` and ${normalName[i]}.`;
                }

                //if this is last normal name and there are more then 2 normal names
                else if (i == normalName.length-1){
                    greetMessage += `, and ${normalName[i]}.`;
                }

                //handling rest cases for normal names in between
                else{  
                    greetMessage += `, ${normalName[i]}`;
                }
            }

            //Handling shouted name cases
            let checkShoutedName = true;
            console.log(shoutedName.length);
            for(let i=0;i<shoutedName.length;i++){
                console.log(`${i} ${shoutedName[i]}`);
                //if normal and shouted names both exist
                if(checkShoutedName && !checkNormalNames){
                    greetMessage += "AND HELLO";
                    checkShoutedName = false;
                }

                //Only is shouted names exist
                if(checkShoutedName && checkNormalNames){
                    greetMessage += "HELLO";
                    checkShoutedName = false;
                }

                //if there is only one shouted name
                if(shoutedName.length == 1){
                    greetMessage += ` ${shoutedName[i]}!`;
                    break;
                }

                //if this is last shouted name and there are only two shouted names present
                if(i == shoutedName.length-1  && shoutedName.length == 2){
                    greetMessage += ` AND ${shoutedName[i]}!`;
                }

                //if this is last shouted name and there are more then two shouted name in the array
                else if (i == shoutedName.length-1){
                    greetMessage += `, AND ${shoutedName[i]}!`;
                }

                //handling rest of the cases for shouted name present in between
                else{  
                    greetMessage += `, ${shoutedName[i]}`;
                }
            }

            //alert the greet message
            alert(greetMessage);
        }

        //Input name
        var getName = window.prompt("Enter Names:- ");
        //Call functino greet
        greet(getName);
    </script>
</body>
</html>