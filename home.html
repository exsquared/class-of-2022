<html>
    <body>
        <button> PRESS ME</button>
    </body>
</html>

<script>
const button = document.querySelector('button');

button.addEventListener('click', () => {
    const names = prompt('What are your names?');
   
          /*    if(names.include('"\"') && names.include('\""')){
                  let startIndex = names.indexOf('"\"');
                  let endIndex = names.indexOf('\""');
                  let extra = names.splice(startIndex,endIndex);
                  names = names - names.split(startIndex,endIndex);
                  
                  let ex = extra.split(',');
                  let exStr = `${ex[0]} and ${ex[1]}`;

                  alert(greet(names.split(',') + `${exStr}`));
                  
                 // console.log(exStr)
              }*/
             
    let myArray = names.split(',');
    alert(greet(myArray));  
           
    
});

function greet(myArray) {
    const greeting = 'Hello,';
    let str1 = `${greeting} `;
   
    if(!myArray){
      return(`${greeting} my friends!`);
  }
  
  else{           
        
         let str = '';
         let capital = '';
         let strEx = '';
         let test = [];
         
        let k = 0;
        // let strCap= '';
        const last = myArray.slice(-1);
        
        for (let i=0; i<myArray.length-1; i++){
            
         
            //adding non capital names in
            if(myArray[i] !== myArray[i].toUpperCase()  && !myArray[i].includes('\'')){
              if(i!=myArray.length-2 ){
                str += `${myArray[i]}, `;
            }
            else{
                str +=`${myArray[i]} `;
            }
        }
        //creating an array of caps
            else if(myArray[i] === myArray[i].toUpperCase()){
                
                capital[++k] += ` ${myArray[i].toUpperCase()}`;             
        }
                         
        }
    
        let joined = '';
        if(!capital){
            if(myArray.length===1){
            joined = `${str1} ${str}`;
        }
      else if(myArray.length===2){
        joined = `${str1} ${myArray[0]} and ${myArray[1]}`;
      }
       
      else{
        joined = `${str1} ${str} and ${last} `;
      }
        }
       
    
       
        else{
            if(capital.length===1 && myArray.length === 1){
                joined = `${str1.toUpperCase()} ${capital[0]} `;
            }
            else if(capital.length===2 && myArray.length === 2){
                joined = `${str.toUpperCase()} ${capital[0]} AND ${str1.toUpperCase()} ${capital[1]}`;
            }
            else if((capital.length===1) && myArray.length>=2){
                joined = `${str1} ${str} ${last} and ${str1.toUpperCase()} ${capital[0]}`;
            }
            else if((capital.length>2) && (myArray.length>2)) {
                let caps = '';
                let caplast = '';
                for(let l=0; l<capital.length; l++){
                    if(l!==capital.length-2){
                        caps += `${capital[l]}, `;
                    }
                    else{
                        caplast = `${capital[l]}`
                    }
                   
                }
                joined = `${str1} ${str} ${last} and ${str1.toUpperCase()} ${caps} AND ${caplast}`;
                
            }

            }
            
        }
        
          
        return(joined);
    }



</script>