<html>
    <head></head>

    <body>
        <input type="text" placeholder="Entry name">
        <button>Submit</button>
    </body>

    <script>
        const name = document.querySelector('input');
        const btn = document.querySelector('button');

        const result = document.createElement('p');

        let names = []

        btn.addEventListener('click', () => {
            names.push(name.value);
            result.textContent = greet(names);
            document.body.append(result);
        });

        function greet(name){

            // Handling empty string or null string.
            if(!name || name == ''){
                return "Hello, my friend.";
            }

            lowercaseNames = [];
            uppercaseNames = [];

            for(let n of name){
                n = n.trim();
                if(n.includes(',')){
                    /* Handling entries with a comma. */
                    if(n.includes('"')){
                        /*
                        Handling requirements with escape characters, allowing us to
                        treat such entries as a single entity.
                        */
                        lowercaseNames.push(n.slice(2, n.length-2)); // Removes first two and last two characters.
                    }else{

                        // Spliting non-escape character strings, treating them as different entries.
                        const splitArray = n.split(',');
                        
                        for(let t of splitArray){
                            if(t === t.toUpperCase()){
                                uppercaseNames.push(t);
                            }else{
                                lowercaseNames.push(t);
                            }
                        }
                    }
                }

                // Separating Capitalized and UPPERCASE names.
                else if(n === n.toUpperCase()){
                    uppercaseNames.push(n);
                }else{
                    lowercaseNames.push(n);
                }
            }

            concatString = '';

            //Handling Capitalized names for a single name, two names and n-names.
            if(lowercaseNames.length == 1){
                concatString += "Hello, " + lowercaseNames[0] + ".";
            }else if(lowercaseNames.length == 2){
                concatString += "Hello, " + lowercaseNames[0] + " and " + lowercaseNames[1] + ".";
            }else if (lowercaseNames.length > 2){
                concatString += "Hello, ";
                concatString += lowercaseNames.slice(0, lowercaseNames.length-1).join(", ") + ", and " + lowercaseNames[lowercaseNames.length - 1] + ".";
            }

            //Handling UPPERCASE names for a single name, two names and n-names.
            if(uppercaseNames.length == 1){

                // Used when no Capitalized name is given.
                if(concatString.length == 0){
                    concatString += "HELLO " + uppercaseNames[0] + "!";
                }else{
                    concatString += " AND HELLO " + uppercaseNames[0] + "!";
                }
            }else if(uppercaseNames.length > 1){

                // Used when no Capitalized name is given.
                if(concatString.length == 0){
                    concatString += "HELLO ";
                }else{
                    concatString += " AND HELLO ";
                }
                concatString += uppercaseNames.slice(0, uppercaseNames.length-1).join(", ") + ", AND " + uppercaseNames[uppercaseNames.length - 1] + "!";
            }
            return concatString;
        }
    </script>
</html>